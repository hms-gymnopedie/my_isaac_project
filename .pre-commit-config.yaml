# =============================================================================
# Pre-commit Configuration
# =============================================================================
#
# Git commit 전에 자동으로 코드 품질 검사를 실행합니다.
#
# 설치:
#   pip install pre-commit
#   pre-commit install
#
# 수동 실행:
#   pre-commit run --all-files
#
# =============================================================================

repos:
  # ---------------------------------------------------------------------------
  # 기본 훅
  # ---------------------------------------------------------------------------
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace       # 줄 끝 공백 제거
      - id: end-of-file-fixer         # 파일 끝 빈 줄 추가
      - id: check-yaml                # YAML 문법 검사
        exclude: ^\.github/
      - id: check-json                # JSON 문법 검사
      - id: check-added-large-files   # 큰 파일 추가 방지
        args: ['--maxkb=1000']
      - id: check-merge-conflict      # 병합 충돌 마커 확인
      - id: debug-statements          # print/debugger 문 확인

  # ---------------------------------------------------------------------------
  # Black - 코드 포맷터
  # ---------------------------------------------------------------------------
  - repo: https://github.com/psf/black
    rev: 24.1.1
    hooks:
      - id: black
        language_version: python3.11
        args: ['--config', 'pyproject.toml']

  # ---------------------------------------------------------------------------
  # isort - import 정렬
  # ---------------------------------------------------------------------------
  - repo: https://github.com/pycqa/isort
    rev: 5.13.2
    hooks:
      - id: isort
        args: ['--settings-path', 'pyproject.toml']

  # ---------------------------------------------------------------------------
  # Flake8 - 스타일 검사
  # ---------------------------------------------------------------------------
  - repo: https://github.com/pycqa/flake8
    rev: 7.0.0
    hooks:
      - id: flake8
        additional_dependencies:
          - flake8-bugbear  # 추가 버그 검사

# =============================================================================
# 제외 패턴
# =============================================================================
exclude: |
  (?x)^(
    data/|
    assets/|
    docs/|
    .*\.usd$|
    .*\.usda$|
    .*\.usdc$
  )
